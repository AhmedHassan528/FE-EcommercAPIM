<div class="flex">
  <app-sidebar></app-sidebar>
  <div class="flex-1 p-6">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-3xl font-bold">{{ 'admin.categories.title' | translate }}</h1>
      <button (click)="onCreate()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
        {{ 'admin.categories.createCategory' | translate }}
      </button>
    </div>

    <!-- Categories Table -->
    <div class="bg-white shadow rounded-lg overflow-hidden">
      <table class="min-w-full">
        <thead class="bg-gray-100">
          <tr>
            <th class="px-6 py-3 text-left">{{ 'admin.categories.table.id' | translate }}</th>
            <th class="px-6 py-3 text-left">{{ 'admin.categories.table.name' | translate }}</th>
            <th class="px-6 py-3 text-left">{{ 'admin.categories.table.image' | translate }}</th>
            <th class="px-6 py-3 text-left">{{ 'admin.categories.table.actions' | translate }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let category of categories" class="border-b">
            <td class="px-6 py-4">{{ category.id }}</td>
            <td class="px-6 py-4">{{ category.name }}</td>
            <td class="px-6 py-4">
              <img [src]="category.image" [alt]="category.name" class="w-16 h-16 object-cover rounded">
            </td>
            <td class="px-6 py-4">
              <button (click)="onEdit(category)" class="text-blue-600 hover:underline mr-2">{{ 'admin.categories.actions.edit' | translate }}</button>
              <button (click)="onDelete(category.id)" class="text-red-600 hover:underline">{{ 'admin.categories.actions.delete' | translate }}</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Create/Edit Modal -->
    <div #crudModal class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden overflow-y-auto h-full w-full">
      <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
        <div class="mt-3">
          <h3 class="text-lg font-medium leading-6 text-gray-900 mb-4">
            {{ isEditMode ? ('admin.categories.modal.editTitle' | translate) : ('admin.categories.modal.createTitle' | translate) }}
          </h3>
          <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()" class="space-y-4">
            <!-- Name -->
            <div>
              <label class="block text-sm font-medium text-gray-700">{{ 'admin.categories.form.name' | translate }}</label>
              <input type="text" formControlName="name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
              <div *ngIf="categoryForm.get('name')?.invalid && categoryForm.get('name')?.touched" class="text-red-500 text-sm">
                {{ 'admin.categories.validation.nameRequired' | translate }}
              </div>
            </div>

            <!-- Category Image -->
            <div>
              <label class="block text-sm font-medium text-gray-700">{{ 'admin.categories.form.image' | translate }} <span class="text-red-500">*</span></label>
              <input type="file" (change)="onCoverImageChange($event)" accept="image/*" class="mt-1 block w-full">
              <div *ngIf="imageError" class="text-red-500 text-sm">{{ imageError }}</div>
              <p class="text-xs text-gray-500 mt-1">{{ 'admin.categories.form.imageRequired' | translate }}</p>
            </div>

            <!-- Form Actions -->
            <div class="flex justify-end space-x-3 mt-4">
              <button type="button" (click)="closeModal()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">
                {{ 'admin.categories.form.cancel' | translate }}
              </button>
              <button type="submit" [disabled]="!categoryForm.valid || imageError" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50">
                {{ isEditMode ? ('admin.categories.form.update' | translate) : ('admin.categories.form.create' | translate) }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div> 